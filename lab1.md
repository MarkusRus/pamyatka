---
title: 'Лабораторная работа 1'
author: 'А.В. Родионов'
fontsize: '14pt'
geometry: 'margin=2cm'
paper: 'a4'
lang: 'russian'
template: 'default.html'
---

# Начало работы с системой управления версиями Git

Основная задача, которую выполняют системы управления версиями -- сохранение
изменений в файле или группе файлов в определенные моменты времени. При
необходимости система управления версиями позволяет восстановить произвольную
сохраненную версию одного или более файлов. Кроме того система управления
версиями позволяет анализировать разницу между различными состояниями группы
файлов во времени, определять, кто является автором того или иного изменения и
когда оно произошло. Хранение данных производится в специальном формате,
который учитывает только изменившиеся части файлов, поэтому накладные расходы
системы управления версиями сведены к минимуму. Среди подобных систем можно
выделить:

* локальные, которые управляют версиями исключительно на локальной файловой
  системе пользователя;
* централизованные, которые позволяют работать с группой файлов (проектом)
  множеству пользователей по сети, но хранят все изменения в одной базе данных,
  на центральном сервере;
* распределенные, в которых пользователи могут иметь какое угодно количество
  копий базы данных изменений, в сети и на локальном диске, при необходимости
  производя слияние изменений между этими базами.

Система управления версиями Git была выпущена в 2005 году для поддержки
процесса разработки ядра ОС Linux. С того времени она прошла большой путь
развития и широко применяется при разработке программного обеспечения.
Отличительной чертой Git является гибкая и эффективная система ветвления,
позволяющая реализовывать сложные нелинейные сценарии разработки и поддержки
ПО.

## Ключевые понятия Git

Идеология Git основывается на следующих отличительных особенностях:

1. В базе изменений (репозитории) хранятся изменения в образах проекта, а не его
   индивидуальных файлов. Это означает, что Git поддерживает состояние проекта
   на диске как специализированная файловая система.  При этом в репозитории
   сохраняются атрибуты файлов, время доступа и модификации, история удалений и
   переименований. Если при очередном сохранении образа какие-то файлы не
   изменились, для них сохраняется только ссылка на предыдущую версию.
2. Практически все операции над изменениями производятся локально. Все действия
   над проектом прежде всего оперируют локальной базой изменений на диске. Это
   позволяет полноценно работать с Git даже при отсутствии соединения с сетью.
3. Контроль целостности. Все изменения образа проекта подвергаются хэшированию
   по алгоритму SHA-1 и получившаяся шестнадцатеричная строка является
   уникальным идентификатором каждого набора изменений. При необходимости любое
   состояние проекта можно восстановить из репозитория, если известны первые
   несколько знаков его хэша. Наоборот, ни одно изменение в проекте невозможно
   без изменения текущего значения хэша, поэтому Git позволяет легко обнаружить
   поврежденные или утерянные при копировании файлы.
4. Большинство операций в Git -- недеструктивны. Любые действия над проектом
   можно отменить, поэтому, кроме специальных случаев, любые операции над
   версиями полностью безопасны.
5. Три состояния файлов. Файлы проекта Git могут находиться
   в одном из следующих состояний:

   * Сохраненное (committed): все изменения файла сохранены в локальный репозиторий Git и могут
   быть восстановлены в любой момент. База сохраненных изменений хранится в
   специальной директории внутри проекта, которая и называется "репозиторий".
   * Измененное (modified): файл был изменен, но его изменения пока не были
   подготовлены для записи в репозиторий.
   * Индексированное (staged): изменения в файле или группе файлов были
   записаны в буферную зону, которая хранится в репозитории в
   особых индексных файлах.

   Цикл разработки состоит из редактирования файлов, после чего те или иные
   файлы со своими изменениями добавляются в индекс. Изменения накапливаются в
   индексе и образуют набор, который связан неким общим смыслом и решаемыми
   задачами. Когда разработчик считает, что набор индексированных изменений
   завершен, индекс сохраняется в репозиторий. При этом для него вычисляется
   хэш, присваивается метка времени, сохраняется автор изменений и сообщение в
   журнал. Сохраненный набор изменений называется в терминологии Git
   "коммитом".

## Установка и начальные настройки

Для установки Git необходимо скачать дистрибутив для нужной операционной
системы с [официального сайта проекта](https://git-scm.com/download).
Существуют также пакеты управления версиями, включающие в себя настроенный Git,
и ориентированные на работу с популярными сетевыми репозиториями проектов,
такие как [Github Desktop](https://desktop.github.com). Помимо собственно
управления версиями они предоставляют удобные локальные средства для управления
удаленными копиями проектов.

Конфигурация Git задается как глобально, так и для индивидуальных пользователей
операционной системе, в последнем случае она располагается в домашней папке
пользователя, в файле `.gitconfig`. Для изменения конфигурации можно
редактировать его непосредственно или использовать команды из консоли. При
первой установке Git необходимо для данного пользователя сохранить
идентификационные данные, которыми впоследствии будут помечаться изменения
этого автора. Для этого в консоли следует выполнить команды:

    git config --global user.name "Имя Автора"
    git config --global user.email адрес@электронной.почты

Флаг `--global` означает, что конфигурация будет сохранена в основном
конфигурационном файле пользователя. При необходимости можно задавать параметры
без этого флага, тогда параметры конфигурации будут изменяться только для
текущего репозитория.

При создании коммита, Git запускает текстовый редактор для ввода сообщений в
журнал. Как правило, используется редактор для данной операционной системы по
умолчанию. При необходимости можно задать его в конфигурации следующей командой
(пример для 32-битной системы Windows и редактора Notepad++):

    git config --global core.editor "'C:/Program Files/Notepad++/notepad++.exe' -multiInst -nosession"
Для других версий ОС и редакторов потребуется изменить путь к исполняемому
модулю редактора и его флаги командной строки.

Команда `git config --list` позволяет вывести на консоль текущую конфигурацию
Git для данного пользователя и проекта.

## Работа в командной строке Git

Несмотря на то, что для Git существует множество оболочек и интеграций со
средами разработки, вся полнота функционала раскрывается в командной строке.
Для получения списка доступных команд и их краткого описания достаточно ввести
в консоли `git help`, а для получения детальной информации по конкретной
команде `git help <команда>`.

### Инициализация репозитория

Пустой репозиторий создается в папке проекта командой `git init`. Для того
чтобы Git начал отслеживать изменения в файлах, необходимо их добавить в
репозиторий и создать первый коммит. Например, если нужно отслеживать изменения
в файлах на языке Python, необходимо ввести следующие команды:

    git add *.py  
    git commit -m "Первый коммит"

Первая команда добавляет в индекс новые файлы, в данном случае все файлы с
расширением ".py" в текущей директории. Вторая команда создает коммит и
связывает с ним сообщение "Первый коммит".

### Клонирование репозитория

Репозитории Git могут быть произвольно скопированы и разработка в них может
вестись независимо и параллельно. Для локальных файлов достаточно просто
скопировать весь проект с директорией `.git`, которая содержит репозиторий. Для
удаленных репозиториев можно воспользоваться командой `git clone`, которая
эффективно передает по сети базу изменений и восстанавливает после копирования
состояние рабочей директории. Например, для того, чтобы создать локальную копию
репозитория, в котором хранится данное пособие, необходимо выполнить команду:

    git clone https://github.com/andviro/pamyatka.git

Помимо удаленных репозиториев, команда `git clone` может работать и с
локальными папками на диске.
