---
title: 'Лабораторная работа 3'
author: 'А.В. Родионов'
fontsize: '14pt'
geometry: 'margin=2cm'
paper: 'a4'
lang: 'russian'
template: 'default.html'
---

# Работа с удаленными репозиториями Git

Модель разработки с помощью Git предполагает, что пользователи работают с множеством копий
репозитория. Благодаря этому, разработчики в большой команде могут решать свои задачи независимо
друг от друга, имея полный контроль над своими копиями проекта. Для синхронизации изменений между
разными копиями, Git предоставляет механизм удаленных (remote) репозиториев, связь с которыми может
осуществляться по протоколу HTTP(HTTPS), SSH, или просто через локальную файловую систему.
Распространена модель работы, в которой существует общий удаленный репозиторий,
доступный по сети, в который участники периодически отправляют свои изменения. Для этого они
устанавливают связь между своими локальными копиями и "главной" сетевой копией. В базе Git удаленный
репозиторий представляет собой сохраненный URL внешней копии и набор ссылок на ветки, тэги и другие
объекты. При необходимости, внешних репозиториев можно подключить сколько угодно.

## Создание внешнего репозитория

В сети существует множество бесплатных сервисов, которые предлагают услуги по хранению репозиториев
и синхронизации с ними. К ним относятся [Github](https://github.com),
[Bitbucket](https://bitbucket.org), [Gitlab](https://gitlab.com) и др. После регистрации они
предоставляют Web-интерфейс, который позволяет создавать новые репозитории и управлять ими. Сходной
функциональности можно добиться также средствами локальной файловой системы, например, для хранения
копии репозитория не во внешнем сервисе, а на резервном носителе. Функционально такой репозиторий
ничем не отличается от внешнего сетевого. Для его создания на диске используется команда `git init
<имя репозитория>.git --bare`. Традиционно, имя внешнего репозитория заканчивают суффиксом ".git".
Созданная таким образом директория представляет собой пустую базу Git, не имеющую рабочего дерева
проекта. Такой репозиторий не предназначен для редактирования файлов, а только хранит базу коммитов.

## Привязка репозитория и отслеживание

Добавление удаленных репозиториев осуществляется командой `git remote add <имя> <URL>`. Имя не
должно содержать пробелов, а URL может представлять собой либо ссылку на внешний ресурс, либо имя
локальной директории, созданной командой `git init --bare`. Просмотреть список удаленных
репозиториев, связанных с текущим, можно командой `git remote`. С ключом `-v`, команда выводит
вместе с именами репозиториев их URL. Ветки из удаленного репозитория имеют имена вида `<имя
репозитория>/<имя ветки>`, что отличает их от локальных. Для того, чтобы установить соответствие
между локальной веткой и удаленной, локальная переводится в режим отслеживания. В этом режиме Git
позволяет выяснить, насколько локальная ветка отличается от ее удаленной версии и притягивать (pull)
внешние изменения или выталкивать (push) локальные в удаленный репозиторий.

## Обмен изменениями

Для того, чтобы скопировать базу коммитов в пустой внешний репозиторий
необходимо выполнить команду `git push -u <имя удаленного репозитория> --all`. Ключ `-u` означает,
что отправляемые ветки будут переведены в режим отслеживания, а ключ `--all` -- что нужно проделать
эту операцию со всеми ветками текущего локального репозитория. Также можно перенести во внешний
репозиторий имеющиеся тэги, командой `git push -u <имя удаленного репозитория> --tags`.

Часто имеет место обратная ситуация: уже существует удаленный репозиторий с изменениями и нужно
создать локальную копию, которая будет отслеживать его ветки. Для создания такой локальной копии
используется команда `git clone <URL репозитория>`. При клонировании, в локальном репозитории
автоматически добавляется удаленный репозиторий `origin`, а локальная ветка `master` начинает
отслеживать удаленную ветку `origin/master`.

Перевести другие локальные ветки в режим отслеживания можно несколькими способами:

* Если имя локально ветки отслеживания может совпадать с именем удаленной ветки, применяется
  команда `git checkout --track <удаленный репозиторий>/<удаленная ветка>`. При этом рабочее дерево
  перейдет на соответствующую ветку и включится режим отслеживания. Этот сценарий используется
  настолько часто, что имеет упрощенный вариант команды. Если выполнить `git checkout <имя
  ветки>` и имя ветки совпадает с именем ветки в одном и только одном удаленном репозитории, она
  автоматически переводится в режим отслеживания;
